
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
 <channel>
   <title>Categories on Joseph T. Ornstein</title>
   <link>/categories/</link>
   <description>Recent content in Categories on Joseph T. Ornstein</description>
   <generator>Hugo -- gohugo.io</generator>
   <copyright>Copyright &amp;copy; 2020 - Joseph T. Ornstein</copyright>
   <lastBuildDate>Tue, 16 Jun 2020 00:00:00 +0000</lastBuildDate>
   
       <atom:link href="/categories/index.xml" rel="self" type="application/rss+xml" />
   
   
     <item>
       <title>COVID-19 Animation</title>
       <link>/posts/covid-animation/</link>
       <pubDate>Tue, 16 Jun 2020 00:00:00 +0000</pubDate>
       
       <guid>/posts/covid-animation/</guid>
       <description>


&lt;p&gt;The &lt;code&gt;gganimate&lt;/code&gt; package facets a &lt;code&gt;ggplot&lt;/code&gt; by some variable and stitches the plots together to create an animated video. Here’s some code to generate such an animation, using the time series of COVID-19 deaths in US counties from the &lt;em&gt;New York Times&lt;/em&gt; &lt;a href=&#34;https://github.com/nytimes/covid-19-data&#34;&gt;data repository&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;First we load and clean up the data, merging it with county-level population counts and demographics.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse) 
library(sf)
library(gganimate)

# Read from NYT github
data &amp;lt;- read_csv(&amp;#39;https://github.com/nytimes/covid-19-data/raw/master/us-counties.csv&amp;#39;)

# If unavailable, use the file pulled previously
if(!exists(&amp;#39;data&amp;#39;)){
  data &amp;lt;- read_csv(&amp;#39;data/nyt-covid/us-counties.csv&amp;#39;)
}

# Generate new cases / deaths variables
data &amp;lt;- data %&amp;gt;% 
  group_by(county, state) %&amp;gt;%
  mutate(new_cases = cases - lag(cases),
         new_deaths = deaths - lag(deaths)) %&amp;gt;% 
  mutate(new_cases = if_else(is.na(new_cases), 0, new_cases),
         new_deaths = if_else(is.na(new_deaths), 0, new_deaths))

# Merge with county population / demographics
library(readxl)
countypops &amp;lt;- read_excel(&amp;#39;data/census/countypop.xlsx&amp;#39;) %&amp;gt;% 
  mutate(fips = substr(id, 10, 14))

race &amp;lt;- read_excel(&amp;#39;data/census/countyrace.xlsx&amp;#39;) %&amp;gt;% 
  mutate(fips = substr(id, 10,14))

county_data &amp;lt;- countypops %&amp;gt;% 
  left_join(race %&amp;gt;% select(fips, total_black), by = &amp;#39;fips&amp;#39;) %&amp;gt;% 
  mutate(pct_black = total_black / population * 100)

data &amp;lt;- data %&amp;gt;% 
  left_join(county_data %&amp;gt;% 
              select(-county, -id), 
            by = &amp;#39;fips&amp;#39;) 

# Fix New York City population
nyc &amp;lt;- countypops %&amp;gt;% 
  filter(county %in% c(&amp;#39;Kings County, New York&amp;#39;,
                       &amp;#39;Queens County, New York&amp;#39;,
                       &amp;#39;New York County, New York&amp;#39;,
                       &amp;#39;Bronx County, New York&amp;#39;,
                       &amp;#39;Richmond County, New York&amp;#39;))
data[data$county == &amp;#39;New York City&amp;#39;,]$population &amp;lt;- sum(nyc$population)

# Give New York City the Manhattan FIPS code
data[data$county == &amp;#39;New York City&amp;#39;,]$fips &amp;lt;- &amp;#39;36061&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Next, get shapefiles for the continental US from the &lt;code&gt;tigris&lt;/code&gt; package.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;continental_states &amp;lt;- unique(tigris::fips_codes$state)[c(1, 3:11, 13:51)]

state_boundaries &amp;lt;- tigris::states(class = &amp;#39;sf&amp;#39;, cb = TRUE, progress_bar = FALSE) %&amp;gt;%
  filter(STUSPS %in% continental_states)

county_shp &amp;lt;- tigris::counties(state = continental_states,
                               cb = TRUE,
                               class = &amp;#39;sf&amp;#39;,
                               progress_bar = FALSE) %&amp;gt;% 
  mutate(fips = paste0(STATEFP, COUNTYFP)) %&amp;gt;% 
  select(fips)

# add centroids (https://www.r-spatial.org/r/2018/10/25/ggplot2-sf-2.html)
county_shp &amp;lt;- cbind(county_shp, st_coordinates(st_centroid(county_shp))) 

county_centroids &amp;lt;- county_shp %&amp;gt;% 
  as_tibble %&amp;gt;% 
  select(fips, X, Y)

# merge with county data
county_shp &amp;lt;- county_shp %&amp;gt;% 
  left_join(county_data, by = &amp;#39;fips&amp;#39;)

theme_set(theme_void() +
          theme(axis.text = element_blank()))

p &amp;lt;- ggplot(data = county_shp) +
  geom_sf(mapping = aes(fill = pct_black)) +
  geom_point(mapping = aes(x=X,y=Y), 
             size = 0.1) +
  xlab(&amp;#39;&amp;#39;) + ylab(&amp;#39;&amp;#39;) +
  scale_fill_gradient(low = &amp;#39;white&amp;#39;, high = &amp;#39;black&amp;#39;)

p&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/covid-animation/index_files/figure-html/Load%20Shapefiles-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Then create a &lt;code&gt;ggplot2&lt;/code&gt; object with all of the time series data plotted on a map and animate it with the &lt;code&gt;gganimate::transition_states()&lt;/code&gt; function.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p &amp;lt;- ggplot(data = data %&amp;gt;%
              left_join(county_centroids, by = &amp;#39;fips&amp;#39;) %&amp;gt;%
              filter(new_deaths &amp;gt; 0)) +
  geom_sf(data = county_shp, aes(fill = pct_black), color = NA) +
  geom_sf(data = state_boundaries, fill = NA) +
  scale_fill_gradient(low = &amp;#39;white&amp;#39;, high = &amp;#39;black&amp;#39;) +
  geom_point(mapping = aes(x=X,y=Y, size = new_deaths),
             color = &amp;#39;red&amp;#39;) +
  xlab(&amp;#39;&amp;#39;) + ylab(&amp;#39;&amp;#39;) +
  theme(legend.position = &amp;quot;none&amp;quot;)

animation &amp;lt;- p + 
  transition_states(date, transition_length = 1,
                    state_length = 3) +
  ggtitle(&amp;#39;{closest_state}&amp;#39;) +
  enter_fade() + exit_fade()

# render the animation (commented out because Hugo doesn&amp;#39;t like multiple gifs per page)
# animate(animation, nframes = 250) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Animating the raw death statistics comes out a bit jerky. There’s a lot of idiosyncratic day-to-day noise in the death reporting, which we can smooth out like so, complete with clunky &lt;code&gt;for&lt;/code&gt; loop:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Fit LOESS (span parameter = 0.3) for each county and append predictions
data &amp;lt;- data %&amp;gt;% 
  ungroup %&amp;gt;% 
  filter(!is.na(fips)) %&amp;gt;% 
  mutate(ID = 1:n(),
         date_numeric = as.numeric(date),
         cases_smoothed = NA,
         death_smoothed = NA)

for(i in unique(data$fips)){
  
  data_subset &amp;lt;- data %&amp;gt;% filter(fips == i)
  
  if(nrow(data_subset) &amp;lt; 7) next # don&amp;#39;t smooth time series that are too short
  
  death_loess &amp;lt;- loess(new_deaths ~ date_numeric, 
                       data = data_subset,
                       span = 0.3)
  
  cases_loess &amp;lt;- loess(new_cases ~ date_numeric,
                       data = data_subset,
                       span = 0.3)
  
  data$death_smoothed[data$ID %in% data_subset$ID] &amp;lt;- 
    death_loess %&amp;gt;% 
    predict(data_subset)
  
  data$cases_smoothed[data$ID %in% data_subset$ID] &amp;lt;- 
    cases_loess %&amp;gt;% 
    predict(data_subset)
  
  
}

p &amp;lt;- ggplot(data = data %&amp;gt;%
              left_join(county_centroids, by = &amp;#39;fips&amp;#39;) %&amp;gt;%
              filter(death_smoothed &amp;gt;= 0.5)) +
  geom_sf(data = county_shp, aes(fill = pct_black), color = NA) +
  geom_sf(data = state_boundaries, fill = NA) +
  scale_fill_gradient(low = &amp;#39;white&amp;#39;, high = &amp;#39;black&amp;#39;) +
  geom_point(mapping = aes(x=X,y=Y, size = death_smoothed),
             color = &amp;#39;red&amp;#39;) +
  xlab(&amp;#39;&amp;#39;) + ylab(&amp;#39;&amp;#39;) +
  theme(legend.position = &amp;quot;none&amp;quot;)

animation &amp;lt;- p + 
  transition_states(date, transition_length = 1,
                    state_length = 3) +
  ggtitle(&amp;#39;{closest_state}&amp;#39;) +
  enter_fade() + exit_fade()

# render the animation
animate(animation, nframes = 250) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/posts/covid-animation/index_files/figure-html/smooth%20video-1.gif&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Much better. I have a few ideas for how to clean it up and make it more beautiful, but they will have to wait for &lt;a href=&#34;https://joeornstein.github.io/covid-animation-2&#34;&gt;another post&lt;/a&gt;.&lt;/p&gt;
</description>
     </item>
   
     <item>
       <title>Measurement and the Back-Door Criterion</title>
       <link>/posts/back-door-measurement/</link>
       <pubDate>Wed, 10 Jun 2020 00:00:00 +0000</pubDate>
       
       <guid>/posts/back-door-measurement/</guid>
       <description>


&lt;p&gt;An useful way to think about the problem of measurement is to first consider an extreme case. For example, this illustration of &lt;a href=&#34;https://en.wikipedia.org/wiki/Simpson&amp;#39;s_paradox&#34;&gt;Simpson’s Paradox&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;figures/jeter-justice.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;In both 1995 and 1996, David Justice had a higher batting average than Derek Jeter. But when you look at their &lt;em&gt;combined&lt;/em&gt; batting average across both years, Justice has the higher batting average. So which is the best measure of hitting ability, the aggregated or disaggregated batting average? Who was the better batter?&lt;/p&gt;
&lt;p&gt;As Judea Pearl shows in this &lt;a href=&#34;pearl-2013.pdf&#34;&gt;nice paper&lt;/a&gt;, causal DAGs can help cleanly resolve Simpson’s Paradox issues. Since I lack the wherewithal to learn a special purpose software to draw a DAG, let me go ahead and render this one in MS Paint…&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;figures/DAG.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Nice. Looking clean and professional. The point is that one’s batting average depends on more than just hitting ability. It also depends on, for instance, the quality of the pitchers you face. Since the baseball season determines both who bats and who pitches, the variable &lt;code&gt;Season&lt;/code&gt; confounds batting average as a measure of quality.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Measurement fundamentally invokes a causal claim&lt;/strong&gt;. A good measure changes whenever the latent characteristic we care about changes. A bad measure has a non-causal, back-door path between the latent characteristic and the observed measure. Only once you close off the back-door path between Batting Quality and Batting Average (by conditioning on Season) does their observed correlation correspond to the true causal relationship.&lt;/p&gt;
</description>
     </item>
   
     <item>
       <title>Spaced Repetition for Syllabi</title>
       <link>/posts/spaced-repetition-for-syllabi/</link>
       <pubDate>Fri, 05 Jun 2020 00:00:00 +0000</pubDate>
       
       <guid>/posts/spaced-repetition-for-syllabi/</guid>
       <description>


&lt;p&gt;We tell students that cramming the night before the test is a poor strategy. But of course it isn’t. Students don’t get good grades for effective long-term memory consolidation. They get good grades for scoring well on the exam &lt;em&gt;tomorrow&lt;/em&gt;. If instructors want to encourage long-term memory building, they need to incentivize it.&lt;/p&gt;
&lt;p&gt;For fun and a pretty graph, I replicated a version of the &lt;a href=&#34;https://en.wikipedia.org/wiki/Hermann_Ebbinghaus&#34;&gt;Ebbinghaus experiment&lt;/a&gt; on forgetting. I started with a list of 100 randomly generated license plate numbers and attempted to memorize them all.&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; To faithfully simulate cramming before the exam, I studied the list for about two hours the night before the first test, with frequent distraction from video games and small children. Here’s how I fared on subsequent tests:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/posts/spaced-repetition-for-syllabi/index_files/figure-html/plot%20forgetting%20curve-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The curve is not exactly exponential decay, but it’s decay nonetheless. I remembered more than I would have expected on Day 1, and forgot about 30% of the license plates within a week. No doubt I would have lost more if not for the intermittent reinforcement of the tests themselves. And now I have about two dozen fake license plate numbers permanently taking up space in long-term memory. Great!&lt;/p&gt;
&lt;p&gt;If instead of cramming I had used something like &lt;a href=&#34;https://www.gwern.net/Spaced-repetition&#34;&gt;spaced repetition&lt;/a&gt;, I’m sure I would have remembered many more license plates. See Nicky Case’s fantastic &lt;a href=&#34;https://ncase.me/remember/&#34;&gt;explorable explanation&lt;/a&gt; for a guided tour to spaced repetition, but in a nutshell it works like this. Take a bunch of items you want to remember, and test yourself at varying intervals. If you successfully remember an item, increase the interval until the next test. If you fail, decrease the interval. That way you test the each item when you’re most in danger of forgetting it.&lt;/p&gt;
&lt;p&gt;The two key elements of spaced repetition are (a) active recall rather than passive studying, and (b) spacing out study sessions. To design a course that leverages spaced repetition, consider the following ideas.&lt;/p&gt;
&lt;div id=&#34;lots-of-low-stakes-assessment&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Lots of low-stakes assessment&lt;/h4&gt;
&lt;p&gt;If a student only engages with a piece of content once during a lecture, then they haven’t been set up to remember it. Anything you want a student to remember needs to be reinforced through active recall, ideally multiple times throughout the semester. Low-stakes vocabulary and reading comprehension quizzes seem so…primary school, but they have a place in higher education too. Any opportunity for active recall is an opportunity to strengthen memory.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;the-most-important-content-goes-first&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;The most important content goes first&lt;/h4&gt;
&lt;!-- For courses that lack an **explicit ladder structure**, there is rarely a clear guide for what order to present material. General to specific? Chronological?  --&gt;
&lt;p&gt;Putting new content during the final weeks of the semester is like a &lt;a href=&#34;https://politicaldictionary.com/words/friday-news-dump/&#34;&gt;Friday news dump&lt;/a&gt;. Without much opportunity to practice and apply it, there’s far less chance students will remember it. Instead, make sure that the content you most want students to remember goes near the beginning of the course, and save those last few weeks for review and applications.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;less-content-more-review&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Less content, more review&lt;/h4&gt;
&lt;p&gt;This may be a controversial one, but I would rather cover less content and have it be successfully rememebered than cover more content and have it crowd out the important stuff. Seriously consider what you want your students to get out of the course. Anything that is a Learning Objective with a capital-L should be reinforced multiple times. Prune other things to make room. Take time in class to review graded homework assignments, so they’re not immediately forgotten after they’re turned in. Create specific class periods for review of previously discussed material. Require your students to ask clarifying questions on a discussion board, and set aside time to review those questions. It all helps.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;decluster-assignments&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Decluster assignments&lt;/h4&gt;
&lt;p&gt;Rather than partitioning your assignments into tidy modules that move from one topic to the next, consider constructing assignments that reach back earlier in the course to test concepts you’ve already covered. My AP European History teacher called this a “RIPPLE &amp;amp; CONNECT”, then she flapped her arms like an eagle and screeched.&lt;/p&gt;
&lt;p&gt;You don’t have to do that last part.&lt;/p&gt;
&lt;!-- ## Isn&#39;t Rote Memorization Bad? --&gt;
&lt;!-- One objection to all of this .... But [Mnemosyne was the mother of the Muses](https://ncase.me/remember/). You can&#39;t have inspiration without memory. If you&#39;re a successful creative person, chances are that your creativity is built upon a bunch of existing knowledge about your field. Smart people tend to know a bunch of things. --&gt;
&lt;/div&gt;
&lt;div id=&#34;further-reading&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Further Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://ncase.me/remember/&#34;&gt;Nicky Case&lt;/a&gt; has a fantastic explorable explanation of spaced repetition&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.gwern.net/Spaced-repetition&#34;&gt;Gwern&lt;/a&gt; has researched everything else you could possibly want to know&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=kO8x8eoU3L4&#34;&gt;The Five Minute University&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;https://www.youtube.com/embed/dZ6qMrVEdHY&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;Can you remember your license plate number? You should!&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
     </item>
   
     <item>
       <title>Fall Semester 2020</title>
       <link>/posts/fall-semester-2020/</link>
       <pubDate>Tue, 26 May 2020 00:00:00 +0000</pubDate>
       
       <guid>/posts/fall-semester-2020/</guid>
       <description>


&lt;p&gt;What is the best way to organize higher education in the fall? The University System of Georgia (my future home, go Dawgs) is &lt;a href=&#34;https://www.redandblack.com/uganews/usg-memo-details-possible-fall-semester-plans/article_dbbf02da-9e3e-11ea-b78f-975f030212bc.html&#34;&gt;considering a range of options&lt;/a&gt; between socially-distanced on-campus classes and a fully online semester. Tyler Cowen suggests a &lt;a href=&#34;https://marginalrevolution.com/marginalrevolution/2020/05/my-weird-lancastrian-method-for-reopening-higher-education.html&#34;&gt;Lancastrian solution&lt;/a&gt;. Zach Weinersmith has my personal &lt;a href=&#34;https://www.smbc-comics.com/comic/social&#34;&gt;favorite proposal&lt;/a&gt; drawn from social network analysis.&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;One shared feature of these proposals is a reduction in the number of large, in-person gatherings. Let me put a little math behind that idea.&lt;/p&gt;
&lt;div id=&#34;keep-classes-small&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Keep classes small&lt;/h3&gt;
&lt;p&gt;It’s not a coincidence that so many COVID-19 infections have been traced to large, indoor &lt;a href=&#34;https://www.nytimes.com/2020/03/30/us/coronavirus-funeral-albany-georgia.html&#34;&gt;super-spreader&lt;/a&gt; &lt;a href=&#34;https://www.nytimes.com/2020/04/12/us/coronavirus-biogen-boston-superspreader.html&#34;&gt;events&lt;/a&gt;. That’s because large gatherings of people simultaneously increase two quantities: the expected number of infected individuals in attendance &lt;em&gt;and&lt;/em&gt; the total number of person-to-person contacts.&lt;/p&gt;
&lt;p&gt;In a group of size &lt;span class=&#34;math inline&#34;&gt;\(n\)&lt;/span&gt;, the probability that at least one person is infected = &lt;span class=&#34;math inline&#34;&gt;\(1 - (1-p)^n\)&lt;/span&gt;, where &lt;span class=&#34;math inline&#34;&gt;\(p\)&lt;/span&gt; is the population prevalence. Here’s what that function looks like for a few values of &lt;span class=&#34;math inline&#34;&gt;\(p\)&lt;/span&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/posts/fall-semester-2020/index_files/figure-html/Probability%20Curve-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;It’s hard to say what the overall prevalence of the virus will be in the fall. Depending on your assumptions, a 300-person lecture hall is either virtually guaranteed to have someone infected with the virus, or maybe has a 1-in-4 chance. Smaller seminar-style classes, on the other hand, are much more likely to be virus-free regardless of overall prevalence.&lt;/p&gt;
&lt;p&gt;The rate at which a virus spreads is proportional to the number of &lt;em&gt;discordant contacts&lt;/em&gt; (contacts between an infected individual and a susceptible individual). This number scales quadratically with the size of a gathering.&lt;/p&gt;
&lt;p&gt;Expected Number Infected: &lt;span class=&#34;math inline&#34;&gt;\(np\)&lt;/span&gt;&lt;br /&gt;
Expected Number Susceptible: &lt;span class=&#34;math inline&#34;&gt;\((1-p)n\)&lt;/span&gt;&lt;br /&gt;
Expected Number of Discordant Contacts: &lt;span class=&#34;math inline&#34;&gt;\(p(1-p)n^2\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/posts/fall-semester-2020/index_files/figure-html/Discordant%20Contacts-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;All of which is to say that when you go from a 30-student seminar to a 300-student lecture hall, you don’t get a tenfold increase in virus spread. You get a &lt;strong&gt;hundredfold&lt;/strong&gt; increase. You can replace that lecture class with ten seminars and lower the rate of viral spread by 90%.&lt;a href=&#34;#fn2&#34; class=&#34;footnote-ref&#34; id=&#34;fnref2&#34;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt; And hey, you might even &lt;a href=&#34;http://www.cwsei.ubc.ca/SEI_research/files/Wieman-Change_Sept-Oct_2007.pdf&#34;&gt;improve&lt;/a&gt; &lt;a href=&#34;https://www.insidehighered.com/quicktakes/2018/06/29/class-size-matters&#34;&gt;learning&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The x-axis on that last figure cuts off at 300, because I expect the model will start to break down a bit for larger crowds where you can’t assume random mixing. I’ll leave the 100,000 person football stadium as an exercise for the reader…&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;You could probably invite the political methodologists back to campus too. See my &lt;a href=&#34;https://joeornstein.github.io/posts/the-contact-paradox/&#34;&gt;previous post&lt;/a&gt; for a much less funny take with more graphs.&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn2&#34;&gt;&lt;p&gt;Or, in general, splitting the big group into &lt;span class=&#34;math inline&#34;&gt;\(m\)&lt;/span&gt; smaller groups reduces the number of discordant contacts m-fold: &lt;span class=&#34;math inline&#34;&gt;\(m(\frac{n}{m})^2 = \frac{n^2}{m}\)&lt;/span&gt;&lt;a href=&#34;#fnref2&#34; class=&#34;footnote-back&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
     </item>
   
     <item>
       <title>The Contact Paradox</title>
       <link>/posts/the-contact-paradox/</link>
       <pubDate>Tue, 12 May 2020 00:00:00 +0000</pubDate>
       
       <guid>/posts/the-contact-paradox/</guid>
       <description>


&lt;!-- --- --&gt;
&lt;!-- ***Attention Conservation Notice:*** *The following post describes an agent-based epidemiological model demonstrating that simple contact tracing strictly outperforms mass random testing. If you already believe this without a model, you may skip the exposition. Maybe just look at the pretty charts.* --&gt;
&lt;!-- --- --&gt;
&lt;p&gt;The &lt;a href=&#34;https://en.wikipedia.org/wiki/Friendship_paradox&#34;&gt;Friendship Paradox&lt;/a&gt; states that, on average, your friends have more friends than you do. (It’s not your fault. It’s just a property non-random sampling on networks.) Note that in the network below only agent 3 is more popular than his friends.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/posts/the-contact-paradox/index_files/figure-html/plot%20graph-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The epidemiological corollary to this rule is that &lt;em&gt;your contacts have more contacts than you&lt;/em&gt;. We can use this fact to help identify and isolate “super-spreaders” during an epidemic, maximizing the effectiveness of the tests we have available.&lt;/p&gt;
&lt;div id=&#34;model-assumptions&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Model Assumptions&lt;/h2&gt;
&lt;p&gt;Consider an agent-based &lt;a href=&#34;https://en.wikipedia.org/wiki/Compartmental_models_in_epidemiology#The_SIR_model&#34;&gt;SIR model&lt;/a&gt; with the following assumptions:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;span class=&#34;math inline&#34;&gt;\(R_0 = 2.5\)&lt;/span&gt; (i.e., in the absence of intervention, we expect each infected person to infect 2.5 others before recovering).&lt;/li&gt;
&lt;li&gt;Infections last 10 days.&lt;/li&gt;
&lt;li&gt;Initial prevalence is 1 per 1,000 agents.&lt;/li&gt;
&lt;li&gt;There is significant asymptomatic and/or presymptomatic spread, so we cannot rely on testing symptomatic individuals and must broadly test asymptomatics.&lt;/li&gt;
&lt;li&gt;There are 10,000 agents with an average of 12 contacts each.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Each day, we administer tests to a fraction of the population &lt;code&gt;pct_tested&lt;/code&gt;. If an agent tests positive, they are removed (quarantined).&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; Consider two strategies for how to target these tests:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;strong&gt;Random Targeting&lt;/strong&gt;: Select agents at random and test&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Contact Targeting&lt;/strong&gt;: Select agents at random and test one of their &lt;em&gt;contacts&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You can find replication code &lt;a href=&#34;code/sir-model.R&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;results&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Results&lt;/h2&gt;
&lt;p&gt;If the degree distribution of the contact network is normally distributed, then there is little difference between the most connected individuals and the least connected individuals.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;figs/normal_distribution.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;In this universe, Contact Targeting does no better than Random Targeting. It doesn’t do any &lt;em&gt;worse&lt;/em&gt;, but since there are no super-spreaders, it doesn’t offer any systematic advantage.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;figs/normal_results.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;But suppose (as is likely the case) that the degree distribution is &lt;a href=&#34;https://en.wikipedia.org/wiki/Fat-tailed_distribution&#34;&gt;fat-tailed&lt;/a&gt;. Most agents have relatively few contacts, but some agents have an enormous number of contacts. (Think service sector workers, conference attendees, etc.) This might look more like a gamma distribution:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;figs/gamma_distribution.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;In this universe, you can suppress the epidemic with significantly fewer tests per day through Contact Targeting instead of Random Targeting. Because &lt;em&gt;your contacts tend to have more contacts than you&lt;/em&gt;, we can identify the super-spreader nodes through simple contact tracing without having to go through the arduous task of mapping the entire network.&lt;a href=&#34;#fn2&#34; class=&#34;footnote-ref&#34; id=&#34;fnref2&#34;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;figs/gamma_results.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;As the above figure shows, you can suppress the epidemic with 3X fewer tests by targeting contacts instead of targeting agents at random. The exact number of tests required will obviously depend on the epidemiological parameters, but the implication is clear. If you’re mass testing people in response to an epidemic (see, for instance, &lt;a href=&#34;https://roadmap.paulromer.net/paulromer-roadmap-report.pdf&#34;&gt;Paul Romer’s roadmap&lt;/a&gt;), there is no advantage to allocating tests at random. You can always do at least as well by allocating tests to contacts.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&#34;fn1&#34;&gt;&lt;p&gt;Assume a zero false negative rate on PCR tests. Since the false negative rate remains constant across targeting conditions, it does not affect the results.&lt;a href=&#34;#fnref1&#34; class=&#34;footnote-back&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&#34;fn2&#34;&gt;&lt;p&gt;See also &lt;a href=&#34;https://arxiv.org/abs/1004.4792&#34; class=&#34;uri&#34;&gt;https://arxiv.org/abs/1004.4792&lt;/a&gt;&lt;a href=&#34;#fnref2&#34; class=&#34;footnote-back&#34;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
     </item>
   
     <item>
       <title>Blogdown Features</title>
       <link>/posts/blogdown-features/</link>
       <pubDate>Sun, 10 May 2020 00:00:00 +0000</pubDate>
       
       <guid>/posts/blogdown-features/</guid>
       <description>


&lt;p&gt;Any website built with &lt;a href=&#34;https://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; and &lt;a href=&#34;https://bookdown.org/yihui/blogdown/&#34;&gt;&lt;code&gt;blogdown&lt;/code&gt;&lt;/a&gt; will inevitably feature one blog post about all the cool features of &lt;a href=&#34;https://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; and &lt;a href=&#34;https://bookdown.org/yihui/blogdown/&#34;&gt;&lt;code&gt;blogdown&lt;/code&gt;&lt;/a&gt;. This is mine.&lt;/p&gt;
&lt;p&gt;Observe, if you will, that we can embed a shiny dashboard into a static website with RMarkdown. Thanks to &lt;a href=&#34;https://liuyanguu.github.io/post/2019/02/24/shiny-in-blogdown/#my-shiny-app-example&#34;&gt;Yang Liu&lt;/a&gt;!&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::include_app(&amp;quot;https://vac-lshtm.shinyapps.io/ncov_tracker/?_ga=2.126674445.1246084674.1588877732-1324960155.1586370896&amp;quot;, height = &amp;quot;600px&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;iframe src=&#34;https://vac-lshtm.shinyapps.io/ncov_tracker/?_ga=2.126674445.1246084674.1588877732-1324960155.1586370896&#34; width=&#34;672&#34; height=&#34;600px&#34;&gt;
&lt;/iframe&gt;
&lt;p&gt;The same &lt;code&gt;knitr&lt;/code&gt; function also works for slides:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::include_url(&amp;#39;https://timmastny.rbind.io/slides/first_presentation#2&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;iframe src=&#34;https://timmastny.rbind.io/slides/first_presentation#2&#34; width=&#34;672&#34; height=&#34;400px&#34;&gt;
&lt;/iframe&gt;
&lt;p&gt;Here’s a tweet courtesy of the Twitter shortcode:&lt;/p&gt;
&lt;p&gt;&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;Hugo 0.24 Released: Big archetype update + &lt;a href=&#34;https://twitter.com/Netlify?ref_src=twsrc%5Etfw&#34;&gt;@Netlify&lt;/a&gt; _redirects etc. file support&lt;a href=&#34;https://t.co/X94FmYDEZJ&#34;&gt;https://t.co/X94FmYDEZJ&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/gohugo?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#gohugo&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/golang?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#golang&lt;/a&gt; &lt;a href=&#34;https://twitter.com/spf13?ref_src=twsrc%5Etfw&#34;&gt;@spf13&lt;/a&gt; &lt;a href=&#34;https://twitter.com/bepsays?ref_src=twsrc%5Etfw&#34;&gt;@bepsays&lt;/a&gt;&lt;/p&gt;&amp;mdash; GoHugo.io (@GoHugoIO) &lt;a href=&#34;https://twitter.com/GoHugoIO/status/877500564405444608?ref_src=twsrc%5Etfw&#34;&gt;June 21, 2017&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/p&gt;
&lt;p&gt;I will add more examples to this post as I discover them.&lt;/p&gt;
</description>
     </item>
   
 </channel>
</rss>
